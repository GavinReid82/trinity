{% extends "layout.html" %}

{% block title %}Speaking Task 2 Feedback{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Speaking Task 2 Feedback</h2>
    
    <div class="row">
        <!-- Main Response Section -->
        <div class="col-md-6">
            <div class="card h-100 bg-light">
                <div class="card-header">
                    <h3>Main Response (2 minutes)</h3>
                </div>
                <div class="card-body">
                    <h4>Your Response:</h4>
                    <p>{{ main_response }}</p>

                    {% if main_feedback %}
                    <h4>Feedback:</h4>
                    <p>{{ main_feedback.general_comment }}</p>

                    <h4>What You Did Well:</h4>
                    <ul>
                        {% for point in main_feedback.did_well %}
                        <li>{{ point }}</li>
                        {% endfor %}
                    </ul>

                    <h4>What You Could Improve:</h4>
                    <ul>
                        {% for point in main_feedback.can_improve %}
                        <li>{{ point }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Follow-up Response Section -->
        <div class="col-md-6">
            <div class="card h-100 bg-light">
                <div class="card-header">
                    <h3>Follow-up Response (30 seconds)</h3>
                </div>
                <div class="card-body">
                    <h4>Follow-up Question:</h4>
                    <p>{{ follow_up_question }}</p>

                    {% if follow_up_response %}
                    <h4>Your Response:</h4>
                    <p>{{ follow_up_response }}</p>

                    {% if follow_up_feedback %}
                    <h4>Feedback:</h4>
                    <p>{{ follow_up_feedback.general_comment }}</p>

                    <h4>What You Did Well:</h4>
                    <ul>
                        {% for point in follow_up_feedback.did_well %}
                        <li>{{ point }}</li>
                        {% endfor %}
                    </ul>

                    <h4>What You Could Improve:</h4>
                    <ul>
                        {% for point in follow_up_feedback.can_improve %}
                        <li>{{ point }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="text-center my-4">
        <a href="{{ url_for('speaking.speaking_task_2') }}" class="btn btn-primary">Try Again</a>
        <a href="{{ url_for('speaking.speaking_home') }}" class="btn btn-secondary">Back to Speaking</a>
    </div>
</div>
{% endblock %}
